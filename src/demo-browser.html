<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Audio Network Lite</title>
  <style>
  </style>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body onLoad="run()">

  <div>
    <label>Sample Rate:</label>
    <span id="sample-rate"></span>
  </div>

  <div>
    <label>FFT output:</label>
    <span id="fft-output"></span>
  </div>

  <button onclick="audioMonoIO.outputDisable()">Output disable</button>
  <button onclick="audioMonoIO.inputDisable()">Input disable</button>

  <button onclick="getFrequencyDomainData()">get FFT data</button>

  <textarea id="play">1000 1100 1200 1300 1400</textarea>
  <input id="play-ms" value="200" />
  <button onclick="play()">Play</button>

  <script>
    var audioMonoIO;
    var playList = [];

    function run() {
      audioMonoIO = new AudioNetworkLite.AudioMonoIO();

      document.getElementById('sample-rate').innerHTML = audioMonoIO.audioContext.sampleRate;
    }

    function playSound() {
      if (playList.length === 0) {
        audioMonoIO.setPeriodicWave(0);
        return;
      }

      audioMonoIO.setPeriodicWave(playList.shift());
      setTimeout(playSound, parseInt(document.getElementById('play-ms').value));
    }

    function getFrequencyDomainData() {
      var data = [];

      audioMonoIO.getFrequencyDomainData().forEach(value => data.push(value.toFixed(6)));
      document.getElementById('fft-output').innerHTML = data.join(', ')
    }

    function play() {
      document.getElementById('play').value.split(' ').filter(item => item.trim() !== '').forEach(item => {
        playList.push(item);
      });
      setTimeout(playSound, parseInt(document.getElementById('play-ms').value));
    }
  </script>
  <!-- you can access distribution version via: <script src="https://unpkg.com/audio-network-lite"></script> -->
</body>
</html>
